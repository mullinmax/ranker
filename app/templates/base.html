<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="/static/style.css" />
<title>{% block title %}Ranker{% endblock %}</title>
</head>
<body{% if body_class %} class="{{ body_class }}"{% endif %}>
<div class="container{% if container_class %} {{ container_class }}{% endif %}">
  <div class="header">
    {% if username %}<span class="username">{{ username }}</span>{% endif %}
    {% if show_admin %}
    <form method="get" action="/admin">
      <button type="submit">Admin</button>
    </form>
    {% endif %}
    {% if show_stats_link %}
    <form method="get" action="/stats">
      <button type="submit">Stats</button>
    </form>
    {% endif %}
    {% if show_back %}
    <form method="get" action="/">
      <button type="submit">Back to Ranking</button>
    </form>
    {% endif %}
    {% if username %}
    <form method="get" action="/logout">
      <button type="submit">Logout</button>
    </form>
    {% endif %}
    <button id="theme-toggle" type="button">ðŸŒ™</button>
  </div>
{% block content %}{% endblock %}
</div>
<div class="footer">
  {% block footer %}{% endblock %}
</div>
<script>
function applyTheme(mode){
  if(mode === 'dark'){
    document.body.classList.add('dark-mode');
    document.getElementById('theme-toggle').textContent = 'â˜€ï¸';
  } else {
    document.body.classList.remove('dark-mode');
    document.getElementById('theme-toggle').textContent = 'ðŸŒ™';
  }
}

const storedTheme = localStorage.getItem('theme');
applyTheme(storedTheme);

document.getElementById('theme-toggle').addEventListener('click', () => {
  const dark = document.body.classList.contains('dark-mode');
  const mode = dark ? 'light' : 'dark';
  localStorage.setItem('theme', mode);
  applyTheme(mode);
});
</script>
</body>
</html>
